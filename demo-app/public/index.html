<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    <!-- <script>
    
      // using the array structure as a tuple
      const relatedData = [ 1, 'a', true, { id: 2}, function() {} ];

      // using an array as a list
      const items = [ 3, 5, 1, 7, 9, 4, 2, 3 ];

      console.log(items.length);

      // const multipliedItems = items.map(x => {
      //   return x + 3; 
      // });
      const multipliedItems = items.map(x => x * 3);

      console.log(items);
      console.log(multipliedItems);

      // const personJSON = "{\"firstName\": \"Tim\", \"lastName\": \"Smith\"}";

      // object literal
      const person = {
        firstName: 'Tim',
        lastName: 'Smith',
      };

      const person2 = {
        firstName: 'Nelson',
        lastName: 'Mandela',
      };

      const people = [ person, person2 ];

      const people2 = [
        {
          firstName: 'Tim',
          lastName: 'Smith',
        },
        {
          firstName: 'Nelson',
          lastName: 'Mandela',
        }
      ];
    
    </script> -->
    <!-- <script>

      // const add = (a,b) => a + b;
      // console.log(add(1,2));
      // console.log(1 + 2);

      let p = {
        fn: 'Bob',
        ln: 'Smith',
        addr: {
          city: 'MV',
          state: 'CA',
        },
      };

      console.log('original p', p);

      // p = {
      //   fn: p.fn,
      //   ln: 'Thomas',
      //   addr: p.addr,
      // };

      // p = Object.assign({}, p, { ln: 'Thomas' });

      // p = {
      //   ...p,
      //   ln: 'Thomas',
      // };

      // console.log('new p', p);

      // p = {
      //   fn: p.fn,
      //   ln: p.ln,
      //   addr: {
      //     city: 'PA',
      //     state: p.addr.state,
      //   },
      // };

      // p = Object.assign({}, p, {
      //   addr: Object.assign({}, p.addr, { city: 'PA' })
      // });

      // p = {
      //   ...p,
      //   addr: {
      //     ...p.addr,
      //     city: 'PA',
      //   },
      // };
    
    </script> -->
    <!-- <script>

      'use strict';

      // function doIt() {

      //   console.log(this);

      // }

      // doIt();
      // window.doIt();

      // const o = {
      //   id: 2,
      //   doIt: doIt,
      // };

      // o.doIt();

      // console.log(o.doIt === window.doIt);


      // function outer() {

      //   console.log(this); // 1st

        // const that = this;

        // const inner = () => {
        //   console.log(this); // 2nd
        // }

        // inner();
      // }

      // const o = {
      //   id: 2,
      //   outer: outer,
      // };

      // setTimeout(() => o.outer(), 2000);

      // const parent = {
      //   name: 'Owiso',
      //   amt: 2000,
      //   addr: {
      //     city: 'Minneapolis',
      //     state: 'MN',
      //   },
      // };

      // const child = Object.create(parent);
      // child.name = 'Haji';
      // console.log(child.amt);

      // parent.amt = 3000;
      // console.log(child.amt);

      // child.amt = 15;
      // console.log(child.amt);

      // delete child.amt;

      // console.log(child.addr.city);

      // // child.addr.city = 'Mountain View';
      // child.addr = {
      //   city: 'Mountain View',
      // };

      // console.log(parent.addr.city);
      // console.log(child);

      // class Person {

      //   constructor(firstName, lastName) {
      //     this.firstName = firstName;
      //     this.lastName = lastName;
      //   }

      //   getFullName = () => {
      //     return this.firstName + ' ' + this.lastName;
      //   }
      // }

      // const p = new Person('Bob', 'Smith');
      // console.log(p.getFullName());
      // console.log(p);

      // function Person2(firstName, lastName) {
      //   this.firstName = firstName;
      //   this.lastName = lastName;
      // }

      // Person2.prototype.getFullName = function() {
      //   return this.firstName + ' ' + this.lastName;
      // }

      // const p2 = new Person2('Bob', 'Smith');
      // console.log(p2.getFullName());
      // console.log(p2);

      // setTimeout(p.getFullName, 2000);

      // function doIt() {
      //   console.log(this);
      // }

      // doIt();

      // const doIt2 = doIt.bind({ id: 2});
      // doIt2();


    </script> -->
    <!-- <script>

      let r = 2;

      const outer = () => {

        let t = 2;

        setTimeout(() => {
          t = 4;
        }, 2000);

        return () => {
          console.log(t);
          console.log(r);
        };
      };

      const inner = outer();

      inner(); // 2

      setTimeout(() => {
        inner(); // 4
      }, 4000);

      console.dir(inner);

    </script> -->
    <script>
    
      // C++ API on the Host
      // setTimeout( ( // Task 1
      // ) => {    // Task 1
      //   console.log('a'); // Task 2
      // }, 0);

      // console.log('b'); // Task 1

      // setTimeout(() => {
      //     console.log('a');
      //     setTimeout(() => {
      //         console.log('b');
      //         setTimeout(() => {
      //             console.log('c');
      //         }, 500);
      //     }, 1000);
      // }, 2000);

      // function allDone() {
      //   console.log('all done');
      // }

      // let counter = 0;

      // counter++;
      // setTimeout(() => {
      //   console.log('a');
      //   counter--;
      //   if (counter === 0) {
      //     allDone();
      //   }
      // }, 1000);
    
      // counter++;
      // setTimeout(() => {
      //   console.log('b');
      //   counter--;
      //   if (counter === 0) {
      //     allDone();
      //   }
      // }, 2500);

      // counter++;
      // setTimeout(() => {
      //   console.log('c');
      //   counter--;
      //   if (counter === 0) {
      //     allDone();
      //   }
      // }, 1000);

      // Using the above setTimeouts, run the allDone function when all three callbacks have executed
      // Rules:
      // 1. All three calls to setTimeout must be invoked in the same task
      // 2. The delay values are irrelevant
      // 3. You cannot add a fourth setTimeout
      // 4. You cannot modify the allDone function


      // const proposeMarriage = () => {
      //   console.log('propose marriage');
      //   return new Promise(function youngLady(resolve, reject) {
      //     setTimeout(() => {
      //       resolve('she is madly in love with the young man...');
      //     }, 2000);
      //   });
      // };

      // const findLocation = (result) => {
      //   console.log(result);
      //   console.log('find a place to get married...');
      //   return new Promise(resolve => {
      //     setTimeout(() => {
      //       resolve('found a place to get married...');
      //     }, 2000);
      //   });
      // };

      // const findClothes = (result) => {
      //   console.log(result);
      //   console.log('find some wedding clothes');
      //   return new Promise(resolve => {
      //     setTimeout(() => {
      //       resolve('found some wedding clothes...');
      //     }, 2000);
      //   });
      // };

      // proposeMarriage()
      //   .then(result => findLocation(result))
      //   .then(result => findClothes(result))
      //   .then(result => console.log(result))
      //   .catch(err => console.log(err))
      //   .finally(() => console.log('happily ever after!'));



      // const youngMan = new Promise(function youngLady(resolve, reject) {

      //   setTimeout(() => {
      //     resolve('she is madly in love with the young man...');
      //   }, 2000);

      // });

      // youngMan
      //   .then((result) => {
      //     console.log(result);

      //     console.log('find a place to get married...');
      //     return new Promise(resolve => {

      //       setTimeout(() => {
      //         resolve('found a place to get married...');
      //       }, 2000);
      //     });
        
      //   })
      //   .then(result => {

      //     console.log(result);

      //     console.log('find some wedding clothes');
      //     return new Promise(resolve => {

      //       setTimeout(() => {
      //         resolve('found some wedding clothes...');
      //       }, 2000);
      //     });

      //   })
      //   .then(result => {
      //     console.log(result);
      //   })
      //   .catch((result) => {
      //     console.log(result);
      //   })
      //   .finally(() => {
      //     console.log('live happily ever after!');
      //   });

      // collection url - 'http://localhost:3010/cars'
      // GET verb - returns all of the cars in the collection
      // POST verb - to add a car to a collection

      // element/member url - 'http://localhost:3010/cars/2'
      // GET verb - return a single car in the collection
      // PUT verb - replaces a car in the collection
      // DELETE verb - removes a car from the collection

      // const xhr = new XMLHttpRequest();

      // xhr.addEventListener('readystatechange', () => {
      //   if (xhr.status >= 200 && xhr.status < 400 && xhr.readyState === 4) {
      //     console.log(JSON.parse(xhr.responseText));
      //   }
      // });

      // xhr.open('POST', 'http://localhost:3010/cars');
      // xhr.setRequestHeader('Content-Type', 'application/json');
      // xhr.send(JSON.stringify({
      //   make: 'Ford',
      //   model: 'T',
      //   year: 1923,
      // }));
      
      // if you do not have a request body, you must call the send function like this:
      // xhr.send();
      
      // Instructions: please upgrade the myFetch function so that it works as described below, do not worry about error handling, use the XHR code above to make the AJAX call
      // DO NOT BREAK THE EARLIER API CALL
      


      const myFetch = (url, options = {}) => {

        const requestOptions = {
          method: 'GET',
          headers: {},
          body: '',
          ...options,
        };

        return new Promise(resolve => {

          const xhr = new XMLHttpRequest();

          xhr.addEventListener('readystatechange', () => {
            if (xhr.status >= 200 && xhr.status < 400 && xhr.readyState === 4) {
              resolve(JSON.parse(xhr.responseText));
            }
          });

          xhr.open(requestOptions.method, url);

          Object.keys(requestOptions.headers).forEach(key => {
            xhr.setRequestHeader(key, requestOptions.headers[key]);
          });

          if (requestOptions.body) {
            xhr.send(requestOptions.body);
          } else {
            xhr.send();
          }

        });
      };

      // myFetch('http://localhost:3010/cars', {
      //   method: 'POST',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify({
      //     make: 'Ford',
      //     model: 'T',
      //     year: 1923,
      //   }),
      // }).then(car => console.log(car));

      // myFetch('http://localhost:3010/cars').then(cars => console.log(cars));


      // Perform the following operations in order using myFetch (output everything to the console):
      // Get All of the Cars
      // Delete All Cars with an Id higher than 3 (delete one REST call at a time)
      // Add a New Car
      // Update the New Car to have a year 1 greater than when added it
      // Get All of the Cars

      // myFetch('http://localhost:3010/cars')
      //   .then(cars => {
      //     console.log(cars);
      //     return Promise.all(cars.map(car => {
      //       if (car.id > 3) {
      //         console.log('deleting id ' + car.id)
      //         return myFetch(
      //           'http://localhost:3010/cars/' + encodeURIComponent(car.id),
      //           { method: 'DELETE' },
      //         );
      //       }
      //     }));
      //   })
      //   .then(() => myFetch(
      //     'http://localhost:3010/cars/',
      //     {
      //       method: 'POST',
      //       headers: { 'Content-Type': 'application/json' },
      //       body: JSON.stringify({
      //         make: 'Ford',
      //         model: 'T',
      //         year: 1923,
      //       }),
      //     },
      //   ))
      //   .then(car => myFetch(
      //     'http://localhost:3010/cars/' + encodeURIComponent(car.id),
      //     {
      //       method: 'PUT',
      //       headers: { 'Content-Type': 'application/json' },
      //       body: JSON.stringify({
      //         ...car,
      //         year: car.year + 1,
      //       }),
      //     }))
      //   .then(() => myFetch('http://localhost:3010/cars'))
      //   .then(cars => console.log(cars));

      // promise-only way
      // const getAllCars = () =>
      //   fetch('http://localhost:3010/cars/')
      //     .then(res => res.json());

      // all the cool kids write it this way...
      const getAllCars = async () => {
        const res = await fetch('http://localhost:3010/cars/');
        const cars = await res.json();
        return cars;
      };

      
      getAllCars().then(cars => console.log(cars));







    </script>
  </body>
</html>
